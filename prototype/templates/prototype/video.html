<!DOCTYPE html>

<html>
  <head>
    <title>Content Accessibility Diagnosis and Repairment</title>
    <link rel="stylesheet" href="../../static/css/styles.css" />
  </head>

  <style>
    .flex-container {
      display: flex;
      flex-direction: row;
      margin: 10px;
    }
    .col {
      display: flex;
      background-color: #f1f1f1;
      width: 33%;
      height: 100vh;
      margin: 10px;
      flex-direction: column;
    }
    #visual {
      display: flex;
      flex-direction: row;
      margin: 10px;
    }
    #col > div {
      margin: 10px;
    }
    #audio {
      display: flex;
      flex-direction: row;
      margin: 10px;
      
    }
  </style>


  <body>
    <div class='flex-container'>
      <div class='col'>
      <div id="embeded_video">
        <h2>Video</h2>
        <iframe
          id="youtube-video"
          src="https://www.youtube.com/embed/{{ video_id }}?enablejsapi=1"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
        <br />
      </div>

      <h2>Visual</h2>
      <div id="visual">
        {% for seg_id, visual_seg in visual_segs_dict.items %} 
        {% if visual_seg.accessible == 0 %}
        <svg width="{{visual_seg.normalized_duration}}vw" height="12" style="display:flex;flex-direction: row;">
          <rect
          class="seekTimeLink" 
          id="v{{visual_seg.seg_id}}"
          related_audio="{{visual_seg.clip_matched_audio_seg_ids}}" 
          width="100%" height="100%"
          start_time="{{visual_seg.start_time}}"
          end_time="{{visual_seg.end_time}}"
          style="fill:rgb(255, 145, 145);"
          style="display:flex" />
        </svg>
        {% else %}
        <svg width="{{visual_seg.normalized_duration}}vw" height="12" style="display:flex;flex-direction: row;">
          <rect 
          class="seekTimeLink" 
          id="v{{visual_seg.seg_id}}"
          related_audio="{{visual_seg.clip_matched_audio_seg_ids}}" 
          width="100%" height="100%"
          start_time="{{visual_seg.start_time}}"
          end_time="{{visual_seg.end_time}}"
          style="fill:#cfdacf;"
           />
        </svg>
        {% endif %} {% endfor %}
        <br />
      </div>

      <h2>Audio</h2>
      <div id="audio">
        {% for seg_id, audio_seg in audio_segs_dict.items %} 
          {% if audio_seg.accessible == 0 %}
          <svg width="{{audio_seg.normalized_duration}}%" height="12">
            <rect 
            id="a{{audio_seg.seg_id}}"
            class="seekTimeLink" 
            width="100%" height="100%"
            start_time="{{audio_seg.start_time}}"
            end_time="{{audio_seg.end_time}}"
            style="fill:rgb(255, 145, 145);" />
          </svg>
          {% else %}
          <svg width="{{audio_seg.normalized_duration}}%" height="12">
            <rect 
            id="a{{audio_seg.seg_id}}"
            class="seekTimeLink" 
            width="100%" height="100%"
            start_time="{{audio_seg.start_time}}"
            end_time="{{audio_seg.end_time}}"
            style="fill:#cfdacf;" />
          </svg>
          {% endif %} 
        {% endfor %}
        <br />
      </div>
      </div>
      <div class='col'>
        <h2>Text</h2>
      </div>
      <div class='col'>
        <h2>Problems</h2>
      </div>
    </div>
  </body>

  <!-- Embed the youtube video, and add even listerners to jump to time -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <!-- Javascript -->
  <script src="../../static/js/video.js"></script>

</html>
